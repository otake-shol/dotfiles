# /jira-create - Jiraチケット作成

入力された情報からJiraチケットを作成します。

## デフォルト設定

```yaml
# 投稿先の設定（必要に応じて編集）
jira:
  project_key: ""        # 例: "PROJ", "DEV"
  issue_type: "Task"     # 例: "Task", "Bug", "Story"
  default_priority: "Medium"  # 例: "Highest", "High", "Medium", "Low", "Lowest"
```

※ 空欄の場合は作成時に確認します

## 入力

以下のいずれかを受け取ります：
- 自然言語での依頼
- 構造化された情報（タイトル、説明、優先度など）
- Slackのやり取り
- 会議メモからのタスク抽出

## 処理フロー

1. 入力情報を分析し、以下を抽出：
   - タイトル（必須）
   - 説明（必須）
   - 優先度（任意、デフォルト: Medium）
   - 担当者（任意）
   - ラベル（任意）

2. 不足情報の確認：
   - project_key が未設定 → プロジェクトキーを確認
   - タイトルが不明確 → 確認を求める

3. 作成内容をユーザーに提示して確認：
   ```
   📋 作成するチケット

   プロジェクト: PROJ
   タイプ: Task
   タイトル: ○○機能の修正
   説明: △△が動作しない問題を修正する
   優先度: High
   担当者: （未設定）

   この内容で作成しますか？
   ```

4. 確認後、mcp-atlassian の `jira_create_issue` を使って作成：
   - `project_key`: プロジェクトキー
   - `summary`: タイトル
   - `issue_type`: 課題タイプ
   - `description`: 説明
   - `priority`: 優先度（指定がある場合）
   - `assignee`: 担当者（指定がある場合）
   - `labels`: ラベル（指定がある場合）

5. 作成完了後、チケット情報を表示

## 完了時のレスポンス

作成が成功したら、以下の形式でレスポンス：

```
✅ Jiraチケットを作成しました

📋 PROJ-123: ○○機能の修正
🔗 https://xxx.atlassian.net/browse/PROJ-123
📊 優先度: High
📁 タイプ: Task
```

## 使用例

### 基本的な使い方
```
/jira-create ログイン機能でパスワードリセットが動かない問題を修正したい
```

### 詳細を指定
```
/jira-create
タイトル: ログイン機能の修正
説明: パスワードリセットメールが送信されない
優先度: 高
担当者: @yamada
```

### Slackのやり取りから
```
/jira-create
以下のSlackでの会話からタスクを作成して：
---
田中: 検索機能が遅いんだけど
山田: 調べてみます
田中: 来週までにお願い
---
```

### 複数チケット作成
```
/jira-create
以下のタスクをそれぞれチケットにして：
- [ ] ユーザー一覧画面の作成
- [ ] ユーザー詳細APIの実装
- [ ] 単体テストの追加
```

## 優先度マッピング

入力の表現を Jira の優先度にマッピング：

| 入力 | Jira優先度 |
|------|-----------|
| 最高、緊急、至急、クリティカル | Highest |
| 高、高め、急ぎ | High |
| 中、普通、通常 | Medium |
| 低、低め | Low |
| 最低 | Lowest |

## 注意事項

- project_key が設定されていない場合は必ず確認する
- 説明が曖昧な場合は具体化を促す
- 作成前に必ず内容確認を行う
- 複数チケット作成時は1件ずつ確認するか、一括確認するか選択させる
