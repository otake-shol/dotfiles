# dotfiles テスト用 docker-compose
# 複数環境でのテスト実行

services:
  # Ubuntu 22.04 テスト
  test-ubuntu:
    build:
      context: ..
      dockerfile: tests/Dockerfile
    volumes:
      - ..:/home/testuser/dotfiles:ro
    environment:
      - CI=true
    command: bats tests/

  # 対話的デバッグ用
  debug:
    build:
      context: ..
      dockerfile: tests/Dockerfile
    volumes:
      - ..:/home/testuser/dotfiles
    environment:
      - CI=true
    command: /bin/zsh
    stdin_open: true
    tty: true
